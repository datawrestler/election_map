<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="//d3js.org/d3.v3.min.js"></script>
    <script src="//d3js.org/topojson.v1.min.js"></script>
    <script src="//d3js.org/queue.v1.min.js"></script>
</head>
<body>

<script type="text/javascript">

    var width = 500,
            height = 1000,
            radius = Math.min(width, height) / 2;



    var svg = d3.select("body").append("svg")
            .attr("width", width)
            .attr("height", height)
            .append("g")
            .attr("transform", "translate(" + width / 2 + "," + height / 2 + ")");


    d3.csv('Data/CombinedData/SUPERCOMBINED2.csv', function(error, circleData){
        if (error) {console.log(error);}
        circleData.forEach(function (d, i) {
            d['median_income'] = +d['median_income'];
            d['percent_obama'] = +d['percent_obama'];
            d['percent_romney'] = +d['percent_romney'];
            console.log(i, d['percent_obama']);
        });

        var circles = svg.selectAll('circle')
                .data(circleData)
                .enter().append('circle')
                .attr("x", 0);

        var obamaaverage = 48564;
        var romneyaverage = 46505;

        var scaleNum = d3.scale.linear()
                .domain([0, 5000])
                .range([0, 100]);


        var circleAttributes = circles
                .attr("cx", function(d, i){return d.median_income/450-(scaleNum(i));})
                .attr('cy', function(d,i) {
                    if (d.percent_obama > 50) {return -d.percent_obama;}
                    else {return -(1-d.percent_obama);}
                })


                .attr('r', function(d) {return d.median_income/50000;})
                .style('fill', function(d,i){
                    if (d.percent_obama > 50) {return 'blue';}
                    else {return 'red';}
                });



    });




</script>


</body>
</html>